<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibraryManagementSystem</title>
    <link rel="stylesheet" href="css/style.css">    
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

   
   
</head>
<body onload="getIssueDatails()">

  <nav class="navbar container-fluid  navbar-expand-lg sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand ms-2" href="index.html">
        LIBRARY 
      </a>
      <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"
        >
          <span class="navbar-toggler"> <i class="fa fa-bars" aria-hidden="true"></i></span>
        </button>
      <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav ms-auto mb-2 me-3 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="users.html"> USERS </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="getBooks.html">BOOKS</a>
          </li>
          <li class="nav-item"  data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
            <a class="nav-link"> <i class="fa fa-bars " aria-hidden="true"></i></a>
          
          </li>
        </ul>
      </div>
    </div>
  </nav>


<div class="container-fluid" >
  <div class="row">
    <div class="col-12 mx-auto  d-flex  ">



      
      <div class="col-md-3 search  mt-3 text-center mx-auto">
        <div class="search">
          <span class="fa fa-search"></span>
          <input 
          onchange 
          onpropertychange 
          onkeyuponpaste oninput="searchIssuedBookAnyId()"
          type="text"
          class="form-control text-center" id="searchId" name="id"  placeHolder="search..."
          id="searchName"
          name="id"
          placeholder="Search...."
          />
        </div>
  
       
      </div>

     







      </div>
      </div>
      </div>



<div class="container-fluid" >
  <div class="row">
    <div class="col-11 mx-auto mt-3 mb-5 ">
      <div class="row gy-4" id="k">      


      </div>
    </div>
  </div>
  </div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title  mx-auto" id="exampleModalLabel">Renew  Book </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

          <div class="form-box">

            <div class="form-group " style="display: none;">
              <label for="name"> ID</label>
              <input class="form-control" type="number" name="issueId" id="ID"  value="" readonly >
            </div>
        
              <div class="form-group "  >
                <label for="name">Iusse ID</label>
                <input class="form-control was-validated" type="number" name="issueId" id="issueId"  value="" readonly >
              </div>
        
              <div class="form-group" id="userIddiv">
                <label for="name">User ID</label>
                <input class="form-control" type="number" name="userId"  id="userId"   value="" readonly >
              </div>
          
              <div class="form-group" id="bookI" >
                <label for="name">Book ID</label>
                <input class="form-control" type="number" name="bookId"  id="bookID1"   value="" readonly >
              </div>

              <div class="form-group">
                      <label >Issue Date</label>
                      <input class="form-control"  type="date" name="issueDate"  id="issueDate1"  value="" readonly>
                </div>
          
               <div class="form-group">
                  <label >Return Date</label>
                  <input class="form-control"  type="date" name="returnDate"  id="returnDate"  value="">
               </div>
                <div class="col-12 text-center m-3" id="savebook">
                   <button type="submit" class="btncustom-btn btn"  onclick="saveRenewBook()" data-bs-dismiss="modal">Renew </button>
                 </div>

              </div>
          </div>
          
          </div>

        
      </div>
    </div>
  </div>
</div>


<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
  
  <button type="button" class="btn-close text-reset m-3" data-bs-dismiss="offcanvas" aria-label="Close"></button>

  <h3 class="text-center"> Menu</h3>

<div class="offcanvas-body">



  <div class="bg-light m-2 p-2">
    <a href="getBooks.html">
      Books
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </a>
  </div>

  <div class="bg-light m-2 p-2">
    <a href="users.html">
    Users
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </a>
  </div>


  <div class="bg-light m-2 p-2">
    <a href="issueBookDetails.html">
      View  Issued Books 
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </a>
  </div>

  <div class="bg-light m-2 p-2">
    <a href="issueBook.html">
      Book Issue Form
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </a>
  </div>

  <div class="bg-light m-2 p-2">
    <a href="highlights.html">
      Highest Lent Book
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </a>
  </div>

  <div class="bg-light m-2 p-2">
    <a href="createBook.html">
      Create New Book
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </a>
  </div>

 

</div>
</div>


<div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel2" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title mx-auto" id="exampleModalLabel2">Fine Deatils</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">




        <div class="container-fluid">

          <div class="form-box">

            <div class="form-group " style="display: none;">
              <label for="name"> ID</label>
              <input class="form-control" type="number" name="issueId" id="ID2"  value="" readonly >
            </div>
        
              <div class="form-group " >
                <label for="name">Iusse ID</label>
                <input class="form-control was-validated" type="number" name="issueId2" id="issueId2"  value="" readonly >
              </div>
        
              <div class="form-group" id="userIddiv"  style="display: none;">
                <label for="name">User ID</label>
                <input class="form-control" type="number" name="userId"  id="userId2"   value="" readonly >
              </div>
          
              <div class="form-group" id="bookIddiv"  style="display: none;">
                <label for="name">Book ID</label>
                <input class="form-control" type="number" name="bookId"  id="bookID2"   value="" readonly >
              </div>

              <div class="form-group" id="issueDatediv"  style="display: none;">
                      <label >Issue Date</label>
                      <input class="form-control"  type="date" name="issueDate2"  id="issueDate2"  value="" readonly>
                </div>
          
               <div class="form-group">
                  <label >Return Date</label>
                  <input class="form-control"  type="date" name="returnDate2"  id="returnDate2"  value="" readonly>
               </div>

               <div class="form-group" id = "actualReturnDatediv">
                <label >Actual Return Date</label>
                <input class="form-control"  type="date" name="actualReturnDate2" id="actualReturnDate2"  value="" readonly>
               </div>
   
             <div class="form-group" >
                     <label for="bookid">Fine Amount</label>
                     <input class="form-control"  type="number" name="fine" id="fine2" value="" readonly >
             </div>
                     <div class="form-groupm mt-1 " >
                       <label for="bookid">IsReturned</label>
   
  
                       <div class="wrapper ">
                        <input type="radio" name="isReturned" value="YES" id="option-1" checked>
   
                        <input type="radio" name="isReturned" value="NO" id="option-2">
                          <label for="option-1" class="option option-1">
                            <div class="dot"></div>
                             <span>YES</span>
                             </label>
                          <label for="option-2" class="option option-2">
                            <div class="dot"></div>
                             <span>NO</span>
                          </label>
                       </div>
                     </div>
   
                 <div class="col-12 text-center m-3" id="returnbook">
                  <button type="submit" class="custom-btn btn"  onclick="returnBookFine()" data-bs-dismiss="modal">Return </button>
                </div>


              </div>
          </div>


      </div>
    
    </div>
  </div>
</div>











 
 
 
 
      
 
        <div id="toast" >
            <div id="img">
            </div>
            <div id="desc">
            </div>
          </div>


          <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
  

            <button type="button" class="btn-close text-reset m-3" data-bs-dismiss="offcanvas" aria-label="Close"></button>

            <h3 class="text-center"> Menu</h3>
          <div class="offcanvas-body">
            <div class="bg-light m-2 p-2">
              <a href="issueBookDetails.html">
                View  Issued Books 
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
              </a>
            </div>
        
            <div class="bg-light m-2 p-2">
              <a href="issueBook.html">
                Book Issue Form
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
              </a>
            </div>
        
            <div class="bg-light m-2 p-2">
              <a href="issueBookDetails.html">
                Highest Lent Book
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
              </a>
            </div>
        
            <div class="bg-light m-2 p-2">
              <a href="issueBookDetails.html">
                Create New Book
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
              </a>
            </div>
        
            <div class="bg-light m-2 p-2">
              <a href="issueBookDetails.html">
                Books
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
              </a>
            </div>
        
            <div class="bg-light m-2 p-2">
              <a href="issueBookDetails.html">
              Users
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
              </a>
            </div>    
          </div>
        </div>


















        <script>

          const saveRenewBook = async () =>{
            let id = document.getElementById("ID").value;
            let issueDate1 = document.getElementById('issueDate1').value;
            let returnDate = document.getElementById('returnDate').value; 
            let userId = document.getElementById('userId').value; 
            let issueId = document.getElementById('issueId').value; 
            let bookId = document.getElementById('bookID1').value; 

        if( !bookId  || !issueDate1  || !userId  || !issueId || !returnDate) {
          return launch_toast("fail","All fields are Required");
        }

       let data = {
         id : id,
        issueId:issueId,
        userId : userId,
        bookId : bookId,
        issueDate:issueDate1,
        returnDate : returnDate
       };    


       try {
    await fetch('http://localhost:8080/LibraryManagement/renewFormHandle', {
      method: 'PUT',
      headers: {
        'Access-Control-Allow-Origin':"*",
        'mode':'no-cors',
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    }).then(response => response.json())
    .then(data => {
        launch_toast("success","Successfully Renewed for <b> 15</b> days");
    });
   } catch (error) {
       launch_toast("fail",error);
   }
       
       console.log("all issue" + json.stringify(data));


    }






        </script>
     

      

<script src="js/index.js"></script>
<script src="js/renewBook.js"></script>
<script src="js/getIssueDatails.js"></script>
<script src="js/returnBook.js"></script>













    
 
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
 
 
 
</body>
</html>